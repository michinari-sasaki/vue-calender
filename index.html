<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/vue@next"></script>
    <link rel="stylesheet" href="../assets/css/common.css" />
    <link rel="stylesheet" href="../assets/css/reset.css" />
    <!-- <link rel="stylesheet" href="../vue-calender/manifest.json" /> -->
    <title>カレンダー</title>
  </head>
  <body>
    <div id="app">
      <header class="header">
        <div class="inner header__inner">
          <h1 class="header__title">ゴミの日カレンダー2</h1>
          <button class="header__button" v-on:click="this.setting= !this.setting">{{settingText}}</button>
        </div>
      </header>
      <div class="main">
        <section class="calender">
          <div class="inner">
            <div class="calender__top">
              <h2 class="calender__heading">{{this.thisYear}}年 {{this.specifiedMonth}}月</h2>
              <div class="calender__setting">
                <button v-on:click="this.decrease">前月</button>&nbsp;
                <button v-on:click="this.increase">次月</button>
              </div>
            </div>
            <ul class="calender__list">
              <li v-for="item in this.dayArray" class="week">{{item}}</li>
              <li v-for="item in this.startDate">&nbsp;</li>
              <li v-for="item,index in this.allDays" :key="index">
                <p class="date">{{item.date}}</p>
              </li>
            </ul>
          </div>
        </section>
      </div>
      <footer class="footer">ゴミの日アプリ</footer>
    </div>
    <script>
      //Vueの設定
      Vue.createApp({
        data: function () {
          return {
            settingText: "設定を開く",
            setting: false,
            thisYear: null,
            startDate: null,
            lastDate: null,
            specifiedMonth: null,
            specifiedYear: null,
            toDay: null,
            thisMonth: null,
            dayArray: ["日", "月", "火", "水", "木", "金", "土"],
            allDays: [],
            thisDay: null,
            checkedDaysA: [],
            checkedWhatDaysA: [],
            checkedDaysB: [],
            checkedWhatDaysB: [],
            checkedDaysC: [],
            checkedWhatDaysC: [],
            combustibleFilter: null,
            nonBurnableFilter: null,
            resourceFilter: null,
          };
        },
        watch: {},
        methods: {
          calender: function () {
            //月初日、月末日を取得
            this.thisYear = new Date().getFullYear();
            this.specifiedYear = new Date().getFullYear();
            this.toDay = new Date().getDate();
            this.thisMonth = new Date().getMonth() + 1;
            this.specifiedMonth = this.thisMonth;
            this.startDate = new Date(this.thisYear, this.specifiedMonth - 1, 1).getDay();
            this.lastDate = new Date(this.thisYear, this.specifiedMonth, 0).getDate();
            let whatDay = 0;
            for (let i = 1; i <= this.lastDate; i++) {
              this.thisDay = new Date(this.thisYear, this.specifiedMonth - 1, i);
              this.thisDay = this.thisDay.getDay();
              //最初の1日の曜日から何階目の曜日かカウントする
              if (this.thisDay == this.startDate) {
                whatDay += 1;
              }
              //指定月の日付を全てオブジェクト化
              this.allDays.push({
                year: this.specifiedYear,
                month: this.specifiedMonth,
                date: i,
                day: this.thisDay,
                whatDay: whatDay,
              });
            }
          },
          increase: function () {
            //月送りプラス
            if (this.specifiedMonth < 13) {
              this.specifiedMonth++;
              if (this.specifiedMonth == 13) {
                this.thisYear += 1;
                this.specifiedMonth = 1;
              }
            }
          },
          decrease: function () {
            //月送りマイナス
            if (this.specifiedMonth > 0) {
              this.specifiedMonth--;
              if (this.specifiedMonth == 0) {
                this.thisYear -= 1;
                this.specifiedMonth = 12;
              }
            }
          },
        },
        mounted: function () {
          //今年と今月を取得してデフォルト表示
          //this.dataLoad();
          this.calender();
          alert("ほげ");
        },
      }).mount("#app");
    </script>
  </body>
</html>
